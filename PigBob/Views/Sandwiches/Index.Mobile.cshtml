@model IEnumerable<PigBob.Models.OrderItem>
@{
    ViewBag.Title = "Sandwiches for " + ViewBag.OrderDate.ToLongDateString();
}

<script src="@Url.Content("~/Scripts/Print.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function ($) {
        $('#accordian table').hide();
        $('#hide').hide();
        $('#show').click(function () {
            $('#accordian table').fadeIn();
            $('#show').fadeOut(function () {
                $('#hide').fadeIn();
            });
            return false;
        });
        $('#hide').click(function () {
            $('#accordian table').fadeOut();
            $('#hide').fadeOut(function () {
                $('#show').fadeIn();
            });
            return false;
        });
    });
</script>

<h2>@ViewBag.Title</h2>

@if (ViewBag.OrderDate >= DateTime.Now.AddHours(-8))
{
    <p>
        @Html.ActionLink("Add a Sandwich", "Create", new { id = ViewBag.OrderId }, new { data_role = "button", data_icon = "plus", data_iconpos = "right" })
    </p>
}

@if(ViewBag.Total > 0) {
    @: Order Summary:
    
    <ul data-role="listview">
        @if (ViewBag.Sausage > 0)
        {
            <li>
                Sausage Only <div class="ui-li-count">@ViewBag.Sausage</div>
            </li>
        }
        @if (ViewBag.Bacon > 0)
        {
            <li>
                Bacon Only <div class="ui-li-count">@ViewBag.Bacon</div>
            </li>
        }
        @if (ViewBag.Egg > 0)
        {
            <li>
                Egg Only <div class="ui-li-count">@ViewBag.Egg</div>
            </li>
        }
        @if (ViewBag.SausageEgg > 0)
        {
            <li>
                Sausage and Egg <div class="ui-li-count">@ViewBag.SausageEgg</div>
            </li>
        }
        @if (ViewBag.BaconEgg > 0)
        {
            <li>
                Bacon and Egg <div class="ui-li-count">@ViewBag.BaconEgg</div>
            </li>
        }
        @if (ViewBag.SausageBacon > 0)
        {
            <li>
                Sausage and Bacon <div class="ui-li-count">@ViewBag.SausageBacon</div>
            </li>
        }
        @if (ViewBag.SausageBaconEgg > 0)
        {
            <li>
                Sausage, Bacon, and Egg <div class="ui-li-count">@ViewBag.SausageBaconEgg</div>
            </li>
        }
        @if (ViewBag.Other > 0)
        {
            int i = 0;
         
            foreach (string item in ViewBag.OtherItems)
            {
                <li>
                    @item <div class="ui-li-count">1</div>
                </li>
            }
        }
    </ul>
    <div style="margin: 20px 0;">
    <div class="ui-grid-a ui-body ui-body-c">
        <strong>
        <div class="ui-block-a">Order Total</div>
        <div class="ui-block-b">@(ViewBag.Total == 1 ? ViewBag.Total + " sandwich" : ViewBag.Total + " sandwiches")</div>
        </strong>
    </div>
    </div>
}

<div id="accordian">
<p>
<a id="show" href="">Show Order Details</a><a id="hide" href="">Hide Order Details</a>&nbsp;<input type="button" onclick="getPrint('summary', '@(ViewBag.OrderDate.ToLongDateString())');" value="Print Order" />
</p>
<table>
    <tr>
        <th>
            Pig Eater
        </th>
        <th>
            Bacon
        </th>
        <th>
            Sausage
        </th>
        <th>
            Egg
        </th>
        <th>
            Other
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Eater.FirstName) @Html.DisplayFor(modelIitem => item.Eater.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Bacon)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Sausage)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Egg)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Other)
        </td>
        <td>
            @Html.ActionLink("View Sandwich", "Details", new { id = item.ID })
            @if (item.Eater.UserId == ViewBag.UserId)
            {
                @: | @Html.ActionLink("Edit", "Edit", new { id = item.ID })
                @: | @Html.ActionLink("Delete", "Delete", new { id = item.ID })
                }
        </td>
    </tr>
}

</table>
</div>